{% extends "base.html" %}
{% block title %}Settings - Punch{% endblock %}
{% block content %}
<div class="space-y-6">
    <h2 class="text-2xl font-bold">Settings</h2>

    <form hx-post="/htmx/settings/save" hx-target="#settings-result" hx-swap="innerHTML" class="space-y-6">
        {% for section in schema %}
        <div class="bg-gray-900 rounded-lg border border-gray-800 overflow-hidden">
            <div class="px-6 py-4 border-b border-gray-800 flex items-center gap-3">
                <svg class="w-5 h-5 text-punch-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="{{ section.icon }}"/>
                </svg>
                <h3 class="text-lg font-semibold">{{ section.label }}</h3>
            </div>
            <div class="p-6 space-y-5">
                {% for field in section.fields %}
                <div>
                    <label for="{{ field.key }}" class="block text-sm font-medium text-gray-300 mb-1">{{ field.label }}</label>
                    {% if field.type == "select" %}
                    <select name="{{ field.key }}" id="{{ field.key }}"
                            class="w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-punch-500">
                        {% for opt in field.options %}
                        <option value="{{ opt }}" {% if settings.get(field.key, field.default) == opt %}selected{% endif %}>{{ opt }}</option>
                        {% endfor %}
                    </select>
                    {% elif field.type == "password" %}
                    <input type="password" name="{{ field.key }}" id="{{ field.key }}"
                           value="{{ settings.get(field.key, field.default) }}"
                           class="w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-punch-500">
                    {% elif field.type == "number" %}
                    <input type="number" name="{{ field.key }}" id="{{ field.key }}"
                           value="{{ settings.get(field.key, field.default) }}"
                           class="w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-punch-500">
                    {% else %}
                    <input type="text" name="{{ field.key }}" id="{{ field.key }}"
                           value="{{ settings.get(field.key, field.default) }}"
                           class="w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-punch-500">
                    {% endif %}
                    {% if field.help %}
                    <p class="text-xs text-gray-500 mt-1">{{ field.help }}</p>
                    {% endif %}
                </div>
                {% endfor %}
            </div>
        </div>
        {% endfor %}

        <div class="flex items-center gap-4">
            <button type="submit" class="px-6 py-2 bg-punch-600 hover:bg-punch-700 rounded-lg text-sm font-medium transition-colors">
                Save Settings
            </button>
            <div id="settings-result"></div>
        </div>
    </form>
</div>
{% endblock %}
